<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riskins Data Extraction Prototype</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f7;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #007aff;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
        }
        
        .btn {
            background: #4A5BCC;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
        }
        
        .btn:hover {
            background: #3A4BC2;
        }
        
        .btn.secondary {
            background: #6c757d;
        }
        
        .btn.secondary:hover {
            background: #545b62;
        }
        
        .log-output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        
        .log-entry {
            margin: 2px 0;
            padding: 2px 5px;
        }
        
        .log-info { color: #007aff; }
        .log-success { color: #28a745; }
        .log-error { color: #dc3545; }
        .log-warning { color: #ffc107; }
        
        .results-grid {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }
        
        .offer-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            background: white;
        }
        
        .offer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .company-name {
            font-weight: 600;
            font-size: 16px;
        }
        
        .price {
            font-size: 18px;
            font-weight: 700;
            color: #28a745;
        }
        
        .old-price {
            text-decoration: line-through;
            color: #6c757d;
            font-size: 14px;
            margin-right: 8px;
        }
        
        .status {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .rating {
            color: #ffa500;
        }
        
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .step {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .step::before {
            content: attr(data-step);
            position: absolute;
            left: 0;
            top: 0;
            background: #007aff;
            color: white;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Riskins Data Extraction</h1>
            <p>–ü—Ä–æ—Ç–æ—Ç–∏–ø –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å https://riskins-insurance.eua.in.ua/</p>
        </div>

        <div class="instructions">
            <h3>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ Network –∑–∞–ø—Ä–æ—Å–æ–≤:</h3>
            <div class="step" data-step="1">–û—Ç–∫—Ä–æ–π—Ç–µ https://riskins-insurance.eua.in.ua/ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ</div>
            <div class="step" data-step="2">–ù–∞–∂–º–∏—Ç–µ F12 ‚Üí –≤–∫–ª–∞–¥–∫–∞ Network</div>
            <div class="step" data-step="3">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É: –Ω–æ–º–µ—Ä "AA1234AA", –ø–µ—Ä–∏–æ–¥ "12 –º—ñ—Å—è—Ü—ñ–≤", —á–µ–∫–±–æ–∫—Å –≤–∫–ª—é—á–µ–Ω</div>
            <div class="step" data-step="4">–ù–∞–∂–º–∏—Ç–µ "–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏" –∏ –Ω–∞–π–¥–∏—Ç–µ API –∑–∞–ø—Ä–æ—Å</div>
            <div class="step" data-step="5">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL, headers –∏ body –∑–∞–ø—Ä–æ—Å–∞ —Å—é–¥–∞</div>
        </div>

        <div class="test-section">
            <h3>üß™ –¢–µ—Å—Ç —Ñ–æ—Ä–º—ã (–∫–∞–∫ –Ω–∞ Riskins)</h3>
            
            <div class="form-group">
                <label for="vehicleNumber">–ù–æ–º–µ—Ä —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –∑–∞—Å–æ–±—É:</label>
                <input type="text" id="vehicleNumber" value="AA1234AA" placeholder="AA1234AA">
            </div>
            
            <div class="form-group">
                <label for="period">–ü–µ—Ä—ñ–æ–¥ –¥—ñ—ó:</label>
                <select id="period">
                    <option value="3">3 –º—ñ—Å—è—Ü—ñ</option>
                    <option value="6">6 –º—ñ—Å—è—Ü—ñ–≤</option>
                    <option value="12" selected>12 –º—ñ—Å—è—Ü—ñ–≤</option>
                </select>
            </div>
            
            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="isNotForTransport" checked>
                    <label for="isNotForTransport">–¢–ó –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–≤–µ–∑–µ–Ω–Ω—è –ø–∞—Å–∞–∂–∏—Ä—ñ–≤ —Ç–∞/–∞–±–æ –≤–∞–Ω—Ç–∞–∂—ñ–≤ –∑–∞ –ø–ª–∞—Ç—É</label>
                </div>
            </div>
            
            <button class="btn" onclick="simulateRequest()">üîÑ –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å</button>
        </div>

        <div class="test-section">
            <h3>üåê API Testing</h3>
            
            <div class="form-group">
                <label for="apiUrl">API Endpoint:</label>
                <input type="text" id="apiUrl" placeholder="https://riskins-insurance.eua.in.ua/api/...">
            </div>
            
            <div class="form-group">
                <label for="requestBody">Request Body (JSON):</label>
                <textarea id="requestBody" rows="4" style="width: 100%; font-family: monospace;" placeholder='{"vehicleNumber": "AA1234AA", "period": 12, "isNotForTransport": true}'></textarea>
            </div>
            
            <button class="btn" onclick="testDirectAPI()">üöÄ –¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ API</button>
            <button class="btn secondary" onclick="testWithProxy()">üîÑ –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏</button>
        </div>

        <div id="results" class="results-grid" style="display: none;">
            <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:</h3>
            <div id="offersContainer"></div>
        </div>

        <div class="log-output" id="logs">
            <strong>–õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</strong><br>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message, type = 'info') {
            const logsContainer = document.getElementById('logs');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            logsContainer.appendChild(logEntry);
            logsContainer.scrollTop = logsContainer.scrollHeight;
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI)
        function simulateRequest() {
            const vehicleNumber = document.getElementById('vehicleNumber').value;
            const period = document.getElementById('period').value;
            const isNotForTransport = document.getElementById('isNotForTransport').checked;

            log('üöó –ù–∞—á–∏–Ω–∞—é —Å–∏–º—É–ª—è—Ü–∏—é –∑–∞–ø—Ä–æ—Å–∞...', 'info');
            log(`üìù –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: ${vehicleNumber}, ${period} –º–µ—Å., –Ω–µ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–æ–∫: ${isNotForTransport}`, 'info');

            // –°–∏–º—É–ª–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É
            setTimeout(() => {
                const mockData = generateMockOffers();
                displayResults(mockData);
                log(`‚úÖ –ü–æ–ª—É—á–µ–Ω–æ ${mockData.length} –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π`, 'success');
            }, 1500);
        }

        // –¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ API
        async function testDirectAPI() {
            const apiUrl = document.getElementById('apiUrl').value;
            const requestBody = document.getElementById('requestBody').value;

            if (!apiUrl) {
                log('‚ùå –£–∫–∞–∂–∏—Ç–µ API endpoint', 'error');
                return;
            }

            log('üåê –¢–µ—Å—Ç–∏—Ä—É—é –ø—Ä—è–º–æ–π API –∑–∞–ø—Ä–æ—Å...', 'info');
            log(`üì° URL: ${apiUrl}`, 'info');

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: requestBody || JSON.stringify({
                        vehicleNumber: document.getElementById('vehicleNumber').value,
                        period: parseInt(document.getElementById('period').value),
                        isNotForTransport: document.getElementById('isNotForTransport').checked
                    })
                });

                log(`üìä –û—Ç–≤–µ—Ç: ${response.status} ${response.statusText}`, response.ok ? 'success' : 'error');

                if (response.ok) {
                    const data = await response.json();
                    log(`üì¶ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã: ${JSON.stringify(data).substring(0, 100)}...`, 'success');
                    
                    if (data.offers || data.quotes || Array.isArray(data)) {
                        displayResults(data.offers || data.quotes || data);
                    }
                } else {
                    const errorText = await response.text();
                    log(`‚ùå –û—à–∏–±–∫–∞: ${errorText}`, 'error');
                }

            } catch (error) {
                log(`‚ùå –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                log('üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: CORS, –Ω–µ–≤–µ—Ä–Ω—ã–π URL, —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'warning');
            }
        }

        // –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ (–∑–∞–≥–ª—É—à–∫–∞)
        function testWithProxy() {
            log('üîÑ –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω', 'warning');
            log('üí° –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–µ–Ω backend –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä', 'info');
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateMockOffers() {
            return [
                {
                    id: 'usg-1',
                    companyName: 'USG',
                    price: 3349,
                    currency: '–≥—Ä–Ω',
                    rating: 5,
                    status: '–ë–µ–∑ –æ–±–º–µ–∂–µ–Ω—å'
                },
                {
                    id: 'arx-1',
                    companyName: 'ARX',
                    price: 3702,
                    oldPrice: 4086,
                    currency: '–≥—Ä–Ω',
                    rating: 5,
                    status: '–ë–µ–∑ –æ–±–º–µ–∂–µ–Ω—å'
                },
                {
                    id: 'knyazha-1',
                    companyName: '–ö–ù–Ø–ñ–ê',
                    price: 4794,
                    currency: '–≥—Ä–Ω',
                    rating: 5,
                    status: '–ë–µ–∑ –æ–±–º–µ–∂–µ–Ω—å'
                },
                {
                    id: 'etalon-1',
                    companyName: '–ïTAL–û–ù',
                    price: 4424,
                    oldPrice: 4944,
                    currency: '–≥—Ä–Ω',
                    rating: 5,
                    status: '–ë–µ–∑ –æ–±–º–µ–∂–µ–Ω—å'
                },
                {
                    id: 'omega-1',
                    companyName: '67Œ©',
                    price: 4483,
                    oldPrice: 4981,
                    currency: '–≥—Ä–Ω',
                    rating: 5,
                    status: '–ë–µ–∑ –æ–±–º–µ–∂–µ–Ω—å'
                }
            ];
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function displayResults(offers) {
            const resultsDiv = document.getElementById('results');
            const container = document.getElementById('offersContainer');
            
            container.innerHTML = offers.map(offer => `
                <div class="offer-card">
                    <div class="offer-header">
                        <span class="company-name">${offer.companyName}</span>
                        <div class="price-block">
                            ${offer.oldPrice ? `<span class="old-price">${offer.oldPrice} ${offer.currency}</span>` : ''}
                            <span class="price">${offer.price} ${offer.currency || '–≥—Ä–Ω'}</span>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span class="rating">${'‚≠ê'.repeat(offer.rating || 5)} –ú–¢–°–ë–£</span>
                        <span class="status">${offer.status || '–î–æ—Å—Ç—É–ø–Ω–æ'}</span>
                    </div>
                </div>
            `).join('');
            
            resultsDiv.style.display = 'block';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ –ü—Ä–æ—Ç–æ—Ç–∏–ø Riskins Data Extraction –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
            log('üìù –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö', 'info');
        });
    </script>
</body>
</html>
